#!/bin/sh

logout(){
dmenu="$(printf ":b  Sleep\n:b  Shutdown\n:b  Logout\n:b  Restart " \
	| dmenu -c -p "RUN " -l 7 -fn "JetBrainsMono NF:size=13" -bw 3)"

case $dmenu in
    ":b  Sleep" ) systemctl suspend ;;
    ":b  Shutdown" ) systemctl poweroff ;;
    ":b  Logout" ) xsetroot -name fsignal:1 ;;
    ":b  Restart " ) systemctl reboot
esac
}

_tmux(){
tmux ls 2> /dev/null
if [ $? = 1 ]; then
printf "Starting TMUX session\n" && \
    tmux -u new -s TMUX -d && \
    tmux rename-window -t TMUX:1 '    terminal ' && \
    tmux new-window -t TMUX && \
    tmux rename-window -t TMUX:2 '    file_manager ' && \
    tmux new-window -t TMUX && \
    tmux rename-window -t TMUX:3 '    text_editor ' && \
    tmux send-keys -t TMUX:2 'while true; do; ranger && clear; done' C-m && \
    tmux send-keys -t TMUX:3 'cd ~/.git-repos/satan_cultists && while true; do; nvim; done' C-m && \
    tmux select-window -t 1
else
    printf "TMUX is already running\n"
fi
}

case $1 in
    logout ) logout ;;
    tmux ) _tmux ;;
esac
